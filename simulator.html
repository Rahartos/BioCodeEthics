<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>CRISPR Simulator | BioCodeEthics</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.5/dist/css/bootstrap.min.css" rel="stylesheet" />
    <style>
      body {
        padding-top: 70px;
      }
      .dna-segment {
        font-family: monospace;
        white-space: pre-wrap;
        word-break: break-word;
      }
      .dna-base {
        background-color: #e0f7fa;
        padding: 2px 4px;
        margin: 1px;
        border-radius: 3px;
        display: inline-block;
      }
      .guide-rna {
        background-color: #ffcdd2;
        color: #b71c1c;
      }
      .edit-seq {
        background-color: #c8e6c9;
        color: #1b5e20;
      }
    </style>
  </head>
  <body>
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg fixed-top navbar-light bg-light text-uppercase">
      <div class="container">
        <a class="navbar-brand fw-bold" href="#">BioCodeEthics</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavAltMarkup">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
          <div class="navbar-nav ms-auto">
            <a class="nav-link px-lg-4" href="./index.html">Home</a>
            <a class="nav-link px-lg-4 active" href="./simulator.html">Simulator</a>
            <a class="nav-link px-lg-4" href="./forum.html">Forum</a>
          </div>
        </div>
      </div>
    </nav>

    <!-- Educational Content -->
    <div class="container mt-5">
      <div class="bg-white p-4 border rounded shadow-sm">
        <h2 class="mb-3">üî¨ What is DNA and How Does CRISPR Work?</h2>
        <p><strong>DNA</strong> is the genetic blueprint of life, composed of four letters:</p>
        <ul>
          <li><strong>A</strong> = Adenine</li>
          <li><strong>T</strong> = Thymine</li>
          <li><strong>C</strong> = Cytosine</li>
          <li><strong>G</strong> = Guanine</li>
        </ul>
        <p>Sequences like <code>ATCGGATACGTAGCTAGGATCGT</code> carry genetic information. CRISPR is a gene editing tool that targets a DNA segment using a guide RNA and replaces it with a new sequence.</p>
        <p><strong>Example:</strong> CRISPR can replace <code>TACGTA</code> in your DNA with <code>GGGCCC</code>.</p>
        <div class="alert alert-info mt-4">
          <strong>Try it below!</strong> Paste your own DNA sequence, choose your guide RNA, and insert an edit.
        </div>
      </div>
    </div>

    <!-- Simulator Form -->
    <div class="container mt-5">
      <div class="row justify-content-center">
        <div class="col-md-8">
          <form onsubmit="simulateEdit(event)">
            <div class="mb-3">
              <label for="originalDNA" class="form-label">Original DNA Sequence</label>
              <textarea class="form-control" id="originalDNA" rows="3" placeholder="e.g., ATCGGATACGTAGCTAGGATCGT"></textarea>
            </div>
            <div class="mb-3">
              <label for="guideRNA" class="form-label">Guide RNA (Target to Cut)</label>
              <input type="text" class="form-control" id="guideRNA" placeholder="e.g., TACGTA" />
            </div>
            <div class="mb-3">
              <label for="editDNA" class="form-label">Edit DNA Sequence (Insert instead)</label>
              <input type="text" class="form-control" id="editDNA" placeholder="e.g., GGGCCC" />
            </div>
            <button type="submit" class="btn btn-primary w-100">Simulate Edit</button>
          </form>

          <!-- Visual Output -->
          <div class="mt-5 d-none" id="resultBox">
            <h4>üîç Visual Results</h4>
            <p><strong>Original DNA:</strong></p>
            <div class="dna-segment" id="originalVisual"></div>

            <p class="mt-4"><strong>Edited DNA:</strong></p>
            <div class="dna-segment" id="editedVisual"></div>
          </div>
        </div>
      </div>
    </div>

    <!-- Footer -->
    <footer class="text-center mt-5 py-3 bg-light">
      <p>&copy; 2025 BioCodeEthics</p>
    </footer>

    <!-- Bootstrap & Script -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.5/dist/js/bootstrap.bundle.min.js"></script>
    <script>
      function highlightDNA(sequence, match, className) {
        let result = "";
        let i = 0;
        while (i < sequence.length) {
          if (sequence.slice(i, i + match.length) === match) {
            result += `<span class="dna-base ${className}">${match}</span>`;
            i += match.length;
          } else {
            result += `<span class="dna-base">${sequence[i]}</span>`;
            i++;
          }
        }
        return result;
      }

      function simulateEdit(event) {
        event.preventDefault();
        const original = document.getElementById("originalDNA").value.trim().toUpperCase();
        const guide = document.getElementById("guideRNA").value.trim().toUpperCase();
        const edit = document.getElementById("editDNA").value.trim().toUpperCase();
        const resultBox = document.getElementById("resultBox");

        if (!original || !guide || !edit) {
          alert("Please fill out all fields.");
          return;
        }

        if (!original.includes(guide)) {
          alert("Guide RNA sequence not found in the original DNA.");
          return;
        }

        const edited = original.replace(guide, edit);
        const originalVisual = highlightDNA(original, guide, "guide-rna");
        const editedVisual = highlightDNA(edited, edit, "edit-seq");

        document.getElementById("originalVisual").innerHTML = originalVisual;
        document.getElementById("editedVisual").innerHTML = editedVisual;
        resultBox.classList.remove("d-none");
      }
    </script>
  </body>
</html>
